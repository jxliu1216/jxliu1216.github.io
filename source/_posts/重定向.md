---
title: 数据流重定向
date: 2021-10-12 22:30:42
tags:
- Linux
- Bash
categories: Linux
---

### 1.数据流

Linux中涉及到的数据流有如下三个：

|  设备  | 设备文件名  | 文件描述符 |     类型     |
| :----: | :---------: | :--------: | :----------: |
|  键盘  | /dev/stdin  |     0      |   标准输入   |
| 显示器 | /dev/stdout |     1      |   标准输出   |
| 显示器 | /dev/stderr |     2      | 错误标准输出 |

<!--more-->

### 2. 输出重定向

输出重定向实在Linux中使用较多的，可以将其理解为将标准输出（包括标准输出和标准错误输出）存入一个文件中，而不是显示在屏幕上。这样有什么作用呢？比如我们执行一个bash脚本，我们可能无法实时在屏幕前看脚本的输出，或者脚本的输出很多，我们一时也看不过来。这个时候就可以使用输出重定向，将脚本执行过程中的输出记录至文件中。脚本执行结束后，直接去查看记录文件中的内容，就可以知道脚本的执行情况。

输出重定向使用分为标准输出重定向和标准错误输出重定向，标准输出重定向使用>或者>>，标准错误输出使用2>或者2>>，分别对应如下4种情况：

- \>：以覆盖的方式将标准输出存放至指定的文件或设备
- \>>：以追加的方式将标准输出存放至指定的文件或设备
- 2>：以覆盖的方式将标准错误输出存放至指定的文件或设备
- 2>>：以追加的方式将标准错误输出存放至指定的文件或设备

#### 2.1 技巧1：将stdout和stderr输出至不同的文件

有时候我们不知道一条命令的执行结果是正确的还是错误的，这个时候我们可以将stdout和stderr分别重定向至不同的文件中，示例如下：

```bash
$ find /home -name .bashrc > list_right 2> list_error
```

#### 2.2 技巧2：将stdout和stderr输出至同一个文件

stdin和stderr输出至不同的文件一方面查看不方便，另一方面也无法体现出输出的先后顺序，可以将这二者输出至同一个文件中，示例如下：

```bash
$ find /home -name .bashrc > log 2>&1     # 方法1
$ find /home -name .bashrc &>             # 方法2
```

#### 2.3 技巧3：/dev/null

有时我们知道错误会发生，但是想将它忽略，这时候黑洞设备/dev/null就很重要了，/dev/null会吃掉任何导向至这个设备的信息，示例如下：

```bash
$ find /home -name .bashrc 2> /dev/null       # 将错误信息丢弃 
```

### 3. 输入重定向

输入重定向可以理解为将原来需要由键盘进行输入的数据改由文件输入，使用<，如法如下：

```bash
command < file
```
